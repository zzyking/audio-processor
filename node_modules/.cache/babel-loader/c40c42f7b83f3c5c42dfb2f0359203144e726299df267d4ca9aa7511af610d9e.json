{"ast":null,"code":"var _jsxFileName = \"/Users/king/Documents/GitHub/fir-filter/src/AudioProcessor.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  padding: 20px;\n`;\n_c = Container;\nconst Section = styled.div`\n  width: 80%;\n  margin: 20px 0;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n`;\n_c2 = Section;\nconst SectionTitle = styled.h2`\n  margin-bottom: 10px;\n  font-size: 24px;\n`;\n_c3 = SectionTitle;\nconst Button = styled.button`\n  font-size: 16px;\n  padding: 10px 20px;\n  margin: 10px;\n  cursor: pointer;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  &:hover {\n    background-color: #45a049;\n  }\n`;\n_c4 = Button;\nconst InputLabel = styled.label`\n  display: inline-block;\n  font-size: 16px;\n  padding: 10px 20px;\n  margin: 10px;\n  cursor: pointer;\n  background-color: #008cba;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  &:hover {\n    background-color: #007bb5;\n  }\n`;\n_c5 = InputLabel;\nconst Label = styled.label`\n  font-size: 16px;\n  padding: 10px 20px;\n`;\n_c6 = Label;\nconst HiddenInput = styled.input`\n  display: none;\n`;\n_c7 = HiddenInput;\nconst AudioContainer = styled.div`\n  margin: 20px 0;\n  text-align: center;\n`;\n_c8 = AudioContainer;\nconst AudioTitle = styled.h2`\n  font-size: 18px;\n  margin: 10px 0;\n`;\n_c9 = AudioTitle;\nconst Loader = styled.div`\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #3498db;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 2s linear infinite;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;\n_c10 = Loader;\nconst Select = styled.select`\n  padding: 10px;\n  margin: 10px;\n  font-size: 16px;\n`;\n_c11 = Select;\nconst Input = styled.input`\n  padding: 10px;\n  margin: 10px;\n  font-size: 16px;\n`;\n_c12 = Input;\nconst AudioProcessor = () => {\n  _s();\n  const [recording, setRecording] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [audioURL, setAudioURL] = useState('');\n  const [noisyAudioURL, setNoisyAudioURL] = useState('');\n  const [filteredAudioURL, setFilteredAudioURL] = useState('');\n  const audioContextRef = useRef(new (window.AudioContext || window.webkitAudioContext)());\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const [snr, setSnr] = useState(20);\n  const [filterLength, setFilterLength] = useState(127);\n  const [lowFreq, setLowFreq] = useState(300);\n  const [highFreq, setHighFreq] = useState(3400);\n  const [filterType, setFilterType] = useState('bandpass');\n  const [stepSize, setstepSize] = useState(0.0001);\n  const [windowSize, setwindowSize] = useState(5);\n  const [noisePower, setnoisePower] = useState(0.01);\n  const startRecording = () => {\n    setRecording(true);\n    audioChunksRef.current = [];\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }).then(stream => {\n      mediaRecorderRef.current = new MediaRecorder(stream);\n      mediaRecorderRef.current.ondataavailable = event => {\n        audioChunksRef.current.push(event.data);\n      };\n      mediaRecorderRef.current.onstop = processAudio;\n      mediaRecorderRef.current.start();\n    });\n  };\n  const stopRecording = () => {\n    setRecording(false);\n    mediaRecorderRef.current.stop();\n  };\n  const processAudio = () => {\n    setLoading(true);\n    const audioBlob = new Blob(audioChunksRef.current, {\n      type: 'audio/wav'\n    });\n    const audioUrl = URL.createObjectURL(audioBlob);\n    setAudioURL(audioUrl);\n    setLoading(false);\n  };\n  const handleFileUpload = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const audioUrl = URL.createObjectURL(file);\n      setAudioURL(audioUrl);\n    }\n  };\n  const addNoiseAndFilter = async () => {\n    try {\n      setLoading(true);\n      const audioBuffer = await fetch(audioURL).then(response => response.arrayBuffer()).then(arrayBuffer => audioContextRef.current.decodeAudioData(arrayBuffer));\n      const noisyBuffer = addGaussianNoise(audioBuffer, snr);\n      let filteredBuffer;\n      if (filterType === 'adaptive') {\n        filteredBuffer = applyAdaptiveFilter(noisyBuffer, filterLength, audioBuffer.sampleRate);\n      } else if (filterType === 'bandpass') {\n        filteredBuffer = applyBandpassFilter(noisyBuffer, filterLength, lowFreq, highFreq, audioBuffer.sampleRate);\n      } else if (filterType === 'wiener') {\n        filteredBuffer = applyWienerFilter(noisyBuffer);\n      }\n      setNoisyAudioURL(URL.createObjectURL(bufferToWave(noisyBuffer, noisyBuffer.length)));\n      setFilteredAudioURL(URL.createObjectURL(bufferToWave(filteredBuffer, filteredBuffer.length)));\n    } catch (error) {\n      console.error('Error processing audio:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const addGaussianNoise = (buffer, snr) => {\n    const channelData = buffer.getChannelData(0);\n    const signalPower = channelData.reduce((acc, val) => acc + val * val, 0) / channelData.length;\n    const noisePower = signalPower / Math.pow(10, snr / 10);\n    const noise = new Float32Array(channelData.length).map(() => Math.sqrt(noisePower) * (Math.random() * 2 - 1));\n    const noisyData = new Float32Array(channelData.length);\n    for (let i = 0; i < channelData.length; i++) {\n      noisyData[i] = channelData[i] + noise[i];\n    }\n    const noisyBuffer = audioContextRef.current.createBuffer(1, noisyData.length, buffer.sampleRate);\n    noisyBuffer.copyToChannel(noisyData, 0);\n    return noisyBuffer;\n  };\n  const applyBandpassFilter = (buffer, filterLength, passbandStart, passbandEnd, sampleRate) => {\n    const nyquist = sampleRate / 2;\n    const normalPassbandStart = passbandStart / nyquist;\n    const normalPassbandEnd = passbandEnd / nyquist;\n    const taps = new Float32Array(filterLength);\n    for (let i = 0; i < filterLength; i++) {\n      const m = i - (filterLength - 1) / 2;\n      if (m === 0) {\n        taps[i] = 2 * (normalPassbandEnd - normalPassbandStart);\n      } else {\n        taps[i] = (Math.sin(2 * Math.PI * normalPassbandEnd * m) - Math.sin(2 * Math.PI * normalPassbandStart * m)) / (Math.PI * m);\n        taps[i] *= 0.54 - 0.46 * Math.cos(2 * Math.PI * i / (filterLength - 1)); // Hamming window\n      }\n    }\n    const filteredData = new Float32Array(buffer.length);\n    const channelData = buffer.getChannelData(0);\n    for (let i = 0; i < buffer.length; i++) {\n      let sum = 0;\n      for (let j = 0; j < filterLength; j++) {\n        if (i - j >= 0) {\n          sum += channelData[i - j] * taps[j];\n        }\n      }\n      filteredData[i] = sum;\n    }\n    const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n    filteredBuffer.copyToChannel(filteredData, 0);\n    return filteredBuffer;\n  };\n  const applyAdaptiveFilter = (buffer, filterLength, sampleRate) => {\n    const channelData = buffer.getChannelData(0);\n    const desiredSignal = channelData.slice(); // 假设理想信号已知或近似为无噪声信号\n    const filteredData = new Float32Array(channelData.length);\n    const filterWeights = new Float32Array(filterLength).fill(0);\n    const stepSize = 0.0001; // 步长因子，控制滤波器调整速度\n\n    for (let i = 0; i < channelData.length - filterLength; i++) {\n      const x = channelData.slice(i, i + filterLength);\n      const y = filterWeights.reduce((sum, weight, j) => sum + weight * x[j], 0);\n      const e = desiredSignal[i] - y;\n      for (let j = 0; j < filterLength; j++) {\n        filterWeights[j] += stepSize * e * x[j];\n      }\n      filteredData[i] = y;\n    }\n    const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n    filteredBuffer.copyToChannel(filteredData, 0);\n    return filteredBuffer;\n  };\n  const applyWienerFilter = buffer => {\n    const channelData = buffer.getChannelData(0);\n    const noisyData = new Float32Array(channelData.length);\n    const noisePower = channelData.reduce((acc, val) => acc + val * val, 0) / channelData.length;\n    const filteredData = channelData.map((value, index) => {\n      const localMean = (channelData[index - 1] || 0) + value + (channelData[index + 1] || 0) / 3;\n      const localVariance = Math.pow(channelData[index - 1] || 0 - localMean, 2) + Math.pow(value - localMean, 2) + Math.pow(channelData[index + 1] || 0 - localMean, 2) / 3;\n      const signalPower = Math.max(localVariance - noisePower, 0);\n      const gain = signalPower / (signalPower + noisePower);\n      return gain * value;\n    });\n    const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n    filteredBuffer.copyToChannel(filteredData, 0);\n    return filteredBuffer;\n  };\n  /*\n    const applyWienerFilter = (buffer, windowSize, noisePower) => {\n      const channelData = buffer.getChannelData(0);\n      const filteredData = new Float32Array(channelData.length);\n    \n      for (let i = 0; i < channelData.length; i++) {\n        let localMean = 0;\n        let localVariance = 0;\n        const halfWindowSize = Math.floor(windowSize / 2);\n    \n        for (let j = -halfWindowSize; j <= halfWindowSize; j++) {\n          const index = Math.min(Math.max(i + j, 0), channelData.length - 1);\n          localMean += channelData[index];\n        }\n        localMean /= windowSize;\n    \n        for (let j = -halfWindowSize; j <= halfWindowSize; j++) {\n          const index = Math.min(Math.max(i + j, 0), channelData.length - 1);\n          localVariance += (channelData[index] - localMean) ** 2;\n        }\n        localVariance /= windowSize;\n    \n        const signalPower = Math.max(localVariance - noisePower, 0);\n        const gain = signalPower / (signalPower + noisePower);\n        filteredData[i] = gain * channelData[i];\n      }\n    \n      const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n      filteredBuffer.copyToChannel(filteredData, 0);\n      return filteredBuffer;\n    };  \n  */\n  const bufferToWave = (buffer, len) => {\n    const numOfChan = buffer.numberOfChannels;\n    const length = len * numOfChan * 2 + 44;\n    const bufferArray = new ArrayBuffer(length);\n    const view = new DataView(bufferArray);\n    const channels = [];\n    let sample;\n    let offset = 0;\n    let pos = 0;\n    const setUint16 = data => {\n      view.setUint16(pos, data, true);\n      pos += 2;\n    };\n    const setUint32 = data => {\n      view.setUint32(pos, data, true);\n      pos += 4;\n    };\n    const writeString = str => {\n      for (let i = 0; i < str.length; i++) {\n        view.setUint8(pos++, str.charCodeAt(i));\n      }\n    };\n    writeString('RIFF'); // ChunkID\n    setUint32(length - 8); // ChunkSize\n    writeString('WAVE'); // Format\n    writeString('fmt '); // Subchunk1ID\n    setUint32(16); // Subchunk1Size\n    setUint16(1); // AudioFormat (PCM)\n    setUint16(numOfChan); // NumChannels\n    setUint32(buffer.sampleRate); // SampleRate\n    setUint32(buffer.sampleRate * 2 * numOfChan); // ByteRate\n    setUint16(numOfChan * 2); // BlockAlign\n    setUint16(16); // BitsPerSample\n    writeString('data'); // Subchunk2ID\n    setUint32(length - pos - 4); // Subchunk2Size\n\n    for (let i = 0; i < buffer.numberOfChannels; i++) {\n      channels.push(buffer.getChannelData(i));\n    }\n    while (offset < len) {\n      for (let i = 0; i < numOfChan; i++) {\n        sample = Math.max(-1, Math.min(1, channels[i][offset])); // Clamp sample to range [-1, 1]\n        sample = (sample < 0 ? sample * 32768 : sample * 32767) | 0; // Convert to 16-bit PCM\n        view.setInt16(pos, sample, true); // Write sample to DataView\n        pos += 2;\n      }\n      offset++;\n    }\n    const blob = new Blob([bufferArray], {\n      type: 'audio/wav'\n    });\n    return blob;\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Section, {\n      children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n        children: \"\\u8F93\\u5165\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: recording ? stopRecording : startRecording,\n        children: recording ? '停止录音' : '开始录音'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n        children: [\"\\u5BFC\\u5165\\u97F3\\u9891\", /*#__PURE__*/_jsxDEV(HiddenInput, {\n          type: \"file\",\n          accept: \"audio/*\",\n          onChange: handleFileUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this), audioURL && /*#__PURE__*/_jsxDEV(AudioContainer, {\n        children: [/*#__PURE__*/_jsxDEV(AudioTitle, {\n          children: \"\\u539F\\u59CB\\u97F3\\u9891\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          controls: true,\n          src: audioURL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Section, {\n      children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n        children: \"\\u566A\\u58F0\\u4E0E\\u6EE4\\u6CE2\\u5668\\u8BBE\\u7F6E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u4FE1\\u566A\\u6BD4 (dB):\", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            value: snr,\n            onChange: e => setSnr(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u6EE4\\u6CE2\\u5668\\u7C7B\\u578B:\", /*#__PURE__*/_jsxDEV(Select, {\n            value: filterType,\n            onChange: e => setFilterType(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"bandpass\",\n              children: \"\\u5E26\\u901A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"adaptive\",\n              children: \"\\u81EA\\u9002\\u5E94\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"wiener\",\n              children: \"\\u7EF4\\u7EB3\\u6EE4\\u6CE2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), filterType === 'bandpass' && /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u6EE4\\u6CE2\\u5668\\u957F\\u5EA6:\", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            value: filterLength,\n            onChange: e => setFilterLength(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u6700\\u4F4E\\u9891\\u7387 (Hz):\", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            value: lowFreq,\n            onChange: e => setLowFreq(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u6700\\u9AD8\\u9891\\u7387 (Hz):\", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            value: highFreq,\n            onChange: e => setHighFreq(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }, this), filterType === 'adaptive' && /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u6B65\\u957F:\", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            value: stepSize,\n            onChange: e => setstepSize(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this), filterType === 'wiener' && /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u7A97\\u53E3\\u5927\\u5C0F:\", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            value: windowSize,\n            onChange: e => setwindowSize(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [\"\\u566A\\u58F0\\u529F\\u7387:\", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            value: noisePower,\n            onChange: e => setnoisePower(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: addNoiseAndFilter,\n        children: \"\\u5904\\u7406\\u97F3\\u9891\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(Section, {\n      children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n        children: \"\\u5904\\u7406\\u540E\\u97F3\\u9891\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this), noisyAudioURL && /*#__PURE__*/_jsxDEV(AudioContainer, {\n        children: [/*#__PURE__*/_jsxDEV(AudioTitle, {\n          children: \"\\u52A0\\u566A\\u540E\\u97F3\\u9891\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          controls: true,\n          src: noisyAudioURL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 13\n      }, this), filteredAudioURL && /*#__PURE__*/_jsxDEV(AudioContainer, {\n        children: [/*#__PURE__*/_jsxDEV(AudioTitle, {\n          children: \"\\u964D\\u566A\\u540E\\u97F3\\u9891\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          controls: true,\n          src: filteredAudioURL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, this);\n};\n_s(AudioProcessor, \"uY/W9IR6rl/P53yiUZoTZzUdiAg=\");\n_c13 = AudioProcessor;\nexport default AudioProcessor;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Section\");\n$RefreshReg$(_c3, \"SectionTitle\");\n$RefreshReg$(_c4, \"Button\");\n$RefreshReg$(_c5, \"InputLabel\");\n$RefreshReg$(_c6, \"Label\");\n$RefreshReg$(_c7, \"HiddenInput\");\n$RefreshReg$(_c8, \"AudioContainer\");\n$RefreshReg$(_c9, \"AudioTitle\");\n$RefreshReg$(_c10, \"Loader\");\n$RefreshReg$(_c11, \"Select\");\n$RefreshReg$(_c12, \"Input\");\n$RefreshReg$(_c13, \"AudioProcessor\");","map":{"version":3,"names":["React","useState","useRef","styled","jsxDEV","_jsxDEV","Container","div","_c","Section","_c2","SectionTitle","h2","_c3","Button","button","_c4","InputLabel","label","_c5","Label","_c6","HiddenInput","input","_c7","AudioContainer","_c8","AudioTitle","_c9","Loader","_c10","Select","select","_c11","Input","_c12","AudioProcessor","_s","recording","setRecording","loading","setLoading","audioURL","setAudioURL","noisyAudioURL","setNoisyAudioURL","filteredAudioURL","setFilteredAudioURL","audioContextRef","window","AudioContext","webkitAudioContext","mediaRecorderRef","audioChunksRef","snr","setSnr","filterLength","setFilterLength","lowFreq","setLowFreq","highFreq","setHighFreq","filterType","setFilterType","stepSize","setstepSize","windowSize","setwindowSize","noisePower","setnoisePower","startRecording","current","navigator","mediaDevices","getUserMedia","audio","then","stream","MediaRecorder","ondataavailable","event","push","data","onstop","processAudio","start","stopRecording","stop","audioBlob","Blob","type","audioUrl","URL","createObjectURL","handleFileUpload","file","target","files","addNoiseAndFilter","audioBuffer","fetch","response","arrayBuffer","decodeAudioData","noisyBuffer","addGaussianNoise","filteredBuffer","applyAdaptiveFilter","sampleRate","applyBandpassFilter","applyWienerFilter","bufferToWave","length","error","console","buffer","channelData","getChannelData","signalPower","reduce","acc","val","Math","pow","noise","Float32Array","map","sqrt","random","noisyData","i","createBuffer","copyToChannel","passbandStart","passbandEnd","nyquist","normalPassbandStart","normalPassbandEnd","taps","m","sin","PI","cos","filteredData","sum","j","desiredSignal","slice","filterWeights","fill","x","y","weight","e","value","index","localMean","localVariance","max","gain","len","numOfChan","numberOfChannels","bufferArray","ArrayBuffer","view","DataView","channels","sample","offset","pos","setUint16","setUint32","writeString","str","setUint8","charCodeAt","min","setInt16","blob","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","accept","onChange","controls","src","_c13","$RefreshReg$"],"sources":["/Users/king/Documents/GitHub/fir-filter/src/AudioProcessor.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  padding: 20px;\n`;\n\nconst Section = styled.div`\n  width: 80%;\n  margin: 20px 0;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n`;\n\nconst SectionTitle = styled.h2`\n  margin-bottom: 10px;\n  font-size: 24px;\n`;\n\nconst Button = styled.button`\n  font-size: 16px;\n  padding: 10px 20px;\n  margin: 10px;\n  cursor: pointer;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  &:hover {\n    background-color: #45a049;\n  }\n`;\n\nconst InputLabel = styled.label`\n  display: inline-block;\n  font-size: 16px;\n  padding: 10px 20px;\n  margin: 10px;\n  cursor: pointer;\n  background-color: #008cba;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  &:hover {\n    background-color: #007bb5;\n  }\n`;\n\nconst Label = styled.label`\n  font-size: 16px;\n  padding: 10px 20px;\n`;\n\nconst HiddenInput = styled.input`\n  display: none;\n`;\n\nconst AudioContainer = styled.div`\n  margin: 20px 0;\n  text-align: center;\n`;\n\nconst AudioTitle = styled.h2`\n  font-size: 18px;\n  margin: 10px 0;\n`;\n\nconst Loader = styled.div`\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #3498db;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 2s linear infinite;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;\n\nconst Select = styled.select`\n  padding: 10px;\n  margin: 10px;\n  font-size: 16px;\n`;\n\nconst Input = styled.input`\n  padding: 10px;\n  margin: 10px;\n  font-size: 16px;\n`;\n\nconst AudioProcessor = () => {\n  const [recording, setRecording] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [audioURL, setAudioURL] = useState('');\n  const [noisyAudioURL, setNoisyAudioURL] = useState('');\n  const [filteredAudioURL, setFilteredAudioURL] = useState('');\n  const audioContextRef = useRef(new (window.AudioContext || window.webkitAudioContext)());\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const [snr, setSnr] = useState(20);\n  const [filterLength, setFilterLength] = useState(127);\n  const [lowFreq, setLowFreq] = useState(300);\n  const [highFreq, setHighFreq] = useState(3400);\n  const [filterType, setFilterType] = useState('bandpass');\n  const [stepSize, setstepSize] = useState(0.0001);\n  const [windowSize, setwindowSize] = useState(5);\n  const [noisePower, setnoisePower] = useState(0.01);\n\n  const startRecording = () => {\n    setRecording(true);\n    audioChunksRef.current = [];\n    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {\n      mediaRecorderRef.current = new MediaRecorder(stream);\n      mediaRecorderRef.current.ondataavailable = event => {\n        audioChunksRef.current.push(event.data);\n      };\n      mediaRecorderRef.current.onstop = processAudio;\n      mediaRecorderRef.current.start();\n    });\n  };\n\n  const stopRecording = () => {\n    setRecording(false);\n    mediaRecorderRef.current.stop();\n  };\n\n  const processAudio = () => {\n    setLoading(true);\n    const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' });\n    const audioUrl = URL.createObjectURL(audioBlob);\n    setAudioURL(audioUrl);\n    setLoading(false);\n  };\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const audioUrl = URL.createObjectURL(file);\n      setAudioURL(audioUrl);\n    }\n  };\n\n  const addNoiseAndFilter = async () => {\n    try {\n      setLoading(true);\n      const audioBuffer = await fetch(audioURL)\n        .then(response => response.arrayBuffer())\n        .then(arrayBuffer => audioContextRef.current.decodeAudioData(arrayBuffer));\n\n      const noisyBuffer = addGaussianNoise(audioBuffer, snr);\n      let filteredBuffer;\n      if (filterType === 'adaptive') {\n        filteredBuffer = applyAdaptiveFilter(noisyBuffer, filterLength, audioBuffer.sampleRate);\n      } else if (filterType === 'bandpass') {\n        filteredBuffer = applyBandpassFilter(noisyBuffer, filterLength, lowFreq, highFreq, audioBuffer.sampleRate);\n      } else if (filterType === 'wiener') {\n        filteredBuffer = applyWienerFilter(noisyBuffer);\n      }\n\n      setNoisyAudioURL(URL.createObjectURL(bufferToWave(noisyBuffer, noisyBuffer.length)));\n      setFilteredAudioURL(URL.createObjectURL(bufferToWave(filteredBuffer, filteredBuffer.length)));\n    } catch (error) {\n      console.error('Error processing audio:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addGaussianNoise = (buffer, snr) => {\n    const channelData = buffer.getChannelData(0);\n    const signalPower = channelData.reduce((acc, val) => acc + val * val, 0) / channelData.length;\n    const noisePower = signalPower / Math.pow(10, snr / 10);\n    const noise = new Float32Array(channelData.length).map(() => Math.sqrt(noisePower) * (Math.random() * 2 - 1));\n    const noisyData = new Float32Array(channelData.length);\n    for (let i = 0; i < channelData.length; i++) {\n      noisyData[i] = channelData[i] + noise[i];\n    }\n    const noisyBuffer = audioContextRef.current.createBuffer(1, noisyData.length, buffer.sampleRate);\n    noisyBuffer.copyToChannel(noisyData, 0);\n    return noisyBuffer;\n  };\n\n  const applyBandpassFilter = (buffer, filterLength, passbandStart, passbandEnd, sampleRate) => {\n    const nyquist = sampleRate / 2;\n    const normalPassbandStart = passbandStart / nyquist;\n    const normalPassbandEnd = passbandEnd / nyquist;\n    const taps = new Float32Array(filterLength);\n\n    for (let i = 0; i < filterLength; i++) {\n      const m = i - (filterLength - 1) / 2;\n      if (m === 0) {\n        taps[i] = 2 * (normalPassbandEnd - normalPassbandStart);\n      } else {\n        taps[i] = (Math.sin(2 * Math.PI * normalPassbandEnd * m) - Math.sin(2 * Math.PI * normalPassbandStart * m)) / (Math.PI * m);\n        taps[i] *= 0.54 - 0.46 * Math.cos(2 * Math.PI * i / (filterLength - 1)); // Hamming window\n      }\n    }\n\n    const filteredData = new Float32Array(buffer.length);\n    const channelData = buffer.getChannelData(0);\n    for (let i = 0; i < buffer.length; i++) {\n      let sum = 0;\n      for (let j = 0; j < filterLength; j++) {\n        if (i - j >= 0) {\n          sum += channelData[i - j] * taps[j];\n        }\n      }\n      filteredData[i] = sum;\n    }\n\n    const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n    filteredBuffer.copyToChannel(filteredData, 0);\n    return filteredBuffer;\n  };\n\n  const applyAdaptiveFilter = (buffer, filterLength, sampleRate) => {\n    const channelData = buffer.getChannelData(0);\n    const desiredSignal = channelData.slice(); // 假设理想信号已知或近似为无噪声信号\n    const filteredData = new Float32Array(channelData.length);\n    const filterWeights = new Float32Array(filterLength).fill(0);\n    const stepSize = 0.0001; // 步长因子，控制滤波器调整速度\n\n    for (let i = 0; i < channelData.length - filterLength; i++) {\n      const x = channelData.slice(i, i + filterLength);\n      const y = filterWeights.reduce((sum, weight, j) => sum + weight * x[j], 0);\n      const e = desiredSignal[i] - y;\n\n      for (let j = 0; j < filterLength; j++) {\n        filterWeights[j] += stepSize * e * x[j];\n      }\n\n      filteredData[i] = y;\n    }\n\n    const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n    filteredBuffer.copyToChannel(filteredData, 0);\n    return filteredBuffer;\n  };\n  const applyWienerFilter = (buffer) => {\n    const channelData = buffer.getChannelData(0);\n    const noisyData = new Float32Array(channelData.length);\n    const noisePower = channelData.reduce((acc, val) => acc + val * val, 0) / channelData.length;\n\n    const filteredData = channelData.map((value, index) => {\n      const localMean = (channelData[index - 1] || 0) + value + (channelData[index + 1] || 0) / 3;\n      const localVariance = Math.pow(channelData[index - 1] || 0 - localMean, 2) + Math.pow(value - localMean, 2) + Math.pow(channelData[index + 1] || 0 - localMean, 2) / 3;\n      const signalPower = Math.max(localVariance - noisePower, 0);\n      const gain = signalPower / (signalPower + noisePower);\n      return gain * value;\n    });\n\n    const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n    filteredBuffer.copyToChannel(filteredData, 0);\n    return filteredBuffer;\n  };\n/*\n  const applyWienerFilter = (buffer, windowSize, noisePower) => {\n    const channelData = buffer.getChannelData(0);\n    const filteredData = new Float32Array(channelData.length);\n  \n    for (let i = 0; i < channelData.length; i++) {\n      let localMean = 0;\n      let localVariance = 0;\n      const halfWindowSize = Math.floor(windowSize / 2);\n  \n      for (let j = -halfWindowSize; j <= halfWindowSize; j++) {\n        const index = Math.min(Math.max(i + j, 0), channelData.length - 1);\n        localMean += channelData[index];\n      }\n      localMean /= windowSize;\n  \n      for (let j = -halfWindowSize; j <= halfWindowSize; j++) {\n        const index = Math.min(Math.max(i + j, 0), channelData.length - 1);\n        localVariance += (channelData[index] - localMean) ** 2;\n      }\n      localVariance /= windowSize;\n  \n      const signalPower = Math.max(localVariance - noisePower, 0);\n      const gain = signalPower / (signalPower + noisePower);\n      filteredData[i] = gain * channelData[i];\n    }\n  \n    const filteredBuffer = audioContextRef.current.createBuffer(1, filteredData.length, buffer.sampleRate);\n    filteredBuffer.copyToChannel(filteredData, 0);\n    return filteredBuffer;\n  };  \n*/\n  const bufferToWave = (buffer, len) => {\n    const numOfChan = buffer.numberOfChannels;\n    const length = len * numOfChan * 2 + 44;\n    const bufferArray = new ArrayBuffer(length);\n    const view = new DataView(bufferArray);\n    const channels = [];\n    let sample;\n    let offset = 0;\n    let pos = 0;\n  \n    const setUint16 = (data) => {\n      view.setUint16(pos, data, true);\n      pos += 2;\n    };\n  \n    const setUint32 = (data) => {\n      view.setUint32(pos, data, true);\n      pos += 4;\n    };\n  \n    const writeString = (str) => {\n      for (let i = 0; i < str.length; i++) {\n        view.setUint8(pos++, str.charCodeAt(i));\n      }\n    };\n  \n    writeString('RIFF');             // ChunkID\n    setUint32(length - 8);           // ChunkSize\n    writeString('WAVE');             // Format\n    writeString('fmt ');             // Subchunk1ID\n    setUint32(16);                   // Subchunk1Size\n    setUint16(1);                    // AudioFormat (PCM)\n    setUint16(numOfChan);            // NumChannels\n    setUint32(buffer.sampleRate);    // SampleRate\n    setUint32(buffer.sampleRate * 2 * numOfChan); // ByteRate\n    setUint16(numOfChan * 2);        // BlockAlign\n    setUint16(16);                   // BitsPerSample\n    writeString('data');             // Subchunk2ID\n    setUint32(length - pos - 4);     // Subchunk2Size\n  \n    for (let i = 0; i < buffer.numberOfChannels; i++) {\n      channels.push(buffer.getChannelData(i));\n    }\n  \n    while (offset < len) {\n      for (let i = 0; i < numOfChan; i++) {\n        sample = Math.max(-1, Math.min(1, channels[i][offset])); // Clamp sample to range [-1, 1]\n        sample = (sample < 0 ? sample * 32768 : sample * 32767) | 0; // Convert to 16-bit PCM\n        view.setInt16(pos, sample, true); // Write sample to DataView\n        pos += 2;\n      }\n      offset++;\n    }\n  \n    const blob = new Blob([bufferArray], { type: 'audio/wav' });\n    return blob;\n  };\n  \n\n  return (\n    <Container>\n      <Section>\n        <SectionTitle>输入</SectionTitle>\n        <Button onClick={recording ? stopRecording : startRecording}>\n          {recording ? '停止录音' : '开始录音'}\n        </Button>\n        <InputLabel>\n          导入音频\n          <HiddenInput type=\"file\" accept=\"audio/*\" onChange={handleFileUpload} />\n        </InputLabel>\n        {audioURL && (\n          <AudioContainer>\n            <AudioTitle>原始音频</AudioTitle>\n            <audio controls src={audioURL} />\n          </AudioContainer>\n        )}\n      </Section>\n      <Section>\n        <SectionTitle>噪声与滤波器设置</SectionTitle>\n        <div>\n          <Label>\n            信噪比 (dB):\n            <Input type=\"number\" value={snr} onChange={(e) => setSnr(e.target.value)} />\n          </Label>\n          <Label>\n            滤波器类型:\n            <Select value={filterType} onChange={(e) => setFilterType(e.target.value)}>\n              <option value=\"bandpass\">带通</option>\n              <option value=\"adaptive\">自适应</option>\n              <option value=\"wiener\">维纳滤波</option>\n            </Select>\n          </Label>\n        </div>\n        {filterType === 'bandpass' && (\n          <Container>\n            <Label>\n              滤波器长度:\n              <Input type=\"number\" value={filterLength} onChange={(e) => setFilterLength(e.target.value)} />\n            </Label>\n            <Label>\n              最低频率 (Hz):\n              <Input type=\"number\" value={lowFreq} onChange={(e) => setLowFreq(e.target.value)} />\n            </Label>\n            <Label>\n              最高频率 (Hz):\n              <Input type=\"number\" value={highFreq} onChange={(e) => setHighFreq(e.target.value)} />\n            </Label>\n          </Container>\n        )}\n        {filterType === 'adaptive' && (\n          <Container>\n            <Label>\n              步长:\n              <Input type=\"number\" value={stepSize} onChange={(e) => setstepSize(e.target.value)} />\n            </Label>\n          </Container>\n        )}\n        {filterType === 'wiener' && (\n          <Container>\n            <Label>\n              窗口大小:\n              <Input type=\"number\" value={windowSize} onChange={(e) => setwindowSize(e.target.value)} />\n            </Label>\n            <Label>\n              噪声功率:\n              <Input type=\"number\" value={noisePower} onChange={(e) => setnoisePower(e.target.value)} />\n            </Label>\n          </Container>\n        )}\n        <Button onClick={addNoiseAndFilter}>处理音频</Button>\n      </Section>\n      {loading && <Loader />}\n      <Section>\n        <SectionTitle>处理后音频</SectionTitle>\n          {noisyAudioURL && (\n            <AudioContainer>\n              <AudioTitle>加噪后音频</AudioTitle>\n              <audio controls src={noisyAudioURL} />\n            </AudioContainer>\n          )}\n          {filteredAudioURL && (\n            <AudioContainer>\n              <AudioTitle>降噪后音频</AudioTitle>\n              <audio controls src={filteredAudioURL} />\n            </AudioContainer>\n          )}\n      </Section>\n    </Container>\n  );\n};\n\nexport default AudioProcessor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}